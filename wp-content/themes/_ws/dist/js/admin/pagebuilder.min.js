function updateOrder(){var e=0;jQuery("ul#sections > li").each(function(t){jQuery(this).find(".text-editor").each(function(){wp.editor.remove(this.id)}),(oldId=this.id)&&jQuery(this).attr("id",oldId.replace(/\d+/g,"~"+t)),jQuery(this).find(".section-options input, .section-options select, .section-options label").each(function(){(oldId=this.id)&&jQuery(this).attr("id",oldId.replace(/\d+/g,"~"+t)),(oldName=jQuery(this).attr("name"))&&jQuery(this).attr("name",oldName.replace(/\d+/g,"~"+t)),(oldFor=jQuery(this).attr("for"))&&jQuery(this).attr("for",oldFor.replace(/\d+/g,"~"+t))}),jQuery(this).find(".module").each(function(s){jQuery(this).find("input, textarea, select, label").each(function(){(oldId=this.id)&&(e=0,jQuery(this).attr("id",oldId.replace(/\d+/g,function(i){return e++,1==e?"~"+t:2==e?"~"+s:"~"+i}))),(oldName=jQuery(this).attr("name"))&&(e=0,jQuery(this).attr("name",oldName.replace(/\d+/g,function(i){return e++,1==e?"~"+t:2==e?"~"+s:"~"+i}))),(oldFor=jQuery(this).attr("for"))&&(e=0,jQuery(this).attr("for",oldFor.replace(/\d+/g,function(i){return e++,1==e?"~"+t:2==e?"~"+s:"~"+i})))}),jQuery(this).find(".media-selector").each(function(){(oldTarget=jQuery(this).attr("target"))&&(e=0,jQuery(this).attr("target",oldTarget.replace(/\d+/g,function(i){return e++,1==e?"~"+t:2==e?"~"+s:"~"+i})))})})}),jQuery("ul#sections > li").each(function(e){(oldId=this.id)&&jQuery(this).attr("id",oldId.replace(/~/g,"")),jQuery(this).find(".section-options input, .section-options select, .section-options label").each(function(){(oldId=this.id)&&jQuery(this).attr("id",oldId.replace(/~/g,"")),(oldName=jQuery(this).attr("name"))&&jQuery(this).attr("name",oldName.replace(/~/g,"")),(oldFor=jQuery(this).attr("for"))&&jQuery(this).attr("for",oldFor.replace(/~/g,""))}),jQuery(this).find(".module").each(function(e){jQuery(this).find("input, textarea, select, label").each(function(){(oldId=this.id)&&jQuery(this).attr("id",oldId.replace(/~/g,"")),(oldName=jQuery(this).attr("name"))&&jQuery(this).attr("name",oldName.replace(/~/g,"")),(oldFor=jQuery(this).attr("for"))&&jQuery(this).attr("for",oldFor.replace(/~/g,""))}),jQuery(this).find(".media-selector").each(function(){(oldTarget=jQuery(this).attr("target"))&&jQuery(this).attr("target",oldTarget.replace(/~/g,""))}),jQuery(this).find(".text-editor").each(function(){wp.editor.initialize(this.id,{tinymce:!0,quicktags:!0})})})}),jQuery(".color-picker").wpColorPicker()}jQuery("ul#sections > li").length&&jQuery("#postdivrich, #page-builder").toggle(),jQuery(document).on("click","#page-builder-btn",function(e){e.preventDefault(),jQuery("#postdivrich, #page-builder").toggle(),jQuery("#page-builder").is(":visible")?jQuery("#page-builder-btn").html('<span class="dashicons dashicons-text"></span>Switch to Editor'):jQuery("#page-builder-btn").html('<span class="dashicons dashicons-hammer"></span>Switch to Page Builder')}),jQuery("#page-builder").is(":visible")?jQuery("#postdivrich").before('<button id="page-builder-btn" class="button"><span class="dashicons dashicons-text"></span>Switch to Editor</button>'):jQuery("#postdivrich").before('<button id="page-builder-btn" class="button"><span class="dashicons dashicons-hammer"></span>Switch to Page Builder</button>'),jQuery(document).on("click",".lightbox-cancel",function(e){e.preventDefault(),jQuery(this).parents(".lightbox").hide(),jQuery(this).parents(".lightbox:not(#module-choices)").remove(),jQuery(".module-choice button").unbind()}),jQuery("#module-choices").css("display","flex").hide(),jQuery(document).ready(function(){updateOrder()}),jQuery("#add-section").on("click",function(e){e.preventDefault(),jQuery.ajax({context:this,url:pbInfo.ajax_url,method:"get",data:{action:"empty_section"},success:function(e){jQuery("#sections").append(e),updateOrder()}})}),jQuery(document).on("click",".section-save",function(e){e.preventDefault(),jQuery(this).after('<div id="section-save" class="lightbox"><div class="postbox"><div class="lightbox-header"><h2 class="lightbox-title">Save Section?</h2><button class="lightbox-cancel"><span class="dashicons dashicons-no-alt"></span></button></div><div class="inside"><input type="text" id="save-name" placeholder="Save Name" /><div id="save-warning"><i>A saved section already exists with that name.</i></div><div class="choices"><button class="button lightbox-cancel">Cancel</button><button class="button section-save-confirm">Save</button></div></div></div></div>'),jQuery("#save-name").focus(),jQuery(document).on("click",".section-save-confirm",function(e){e.preventDefault();var t=jQuery(this).parents(".lightbox").find("#save-name"),s='{"section-name": "'+t.val()+'"';jQuery(this).parents(".section").find(".section-options input:not([type=button]), .section-options select").each(function(e,t){s+=', "'+t.id.replace(/-\d+/g,"")+'": ',"checkbox"==t.type?s+=t.checked:s+='"'+t.value+'"'}),s+=', "modules": [';var i=jQuery(this).parents(".section").find(".module").length;jQuery(this).parents(".section").find(".module").each(function(e,t){s+="{";var o=jQuery(this).find("input:not([type=button]), textarea, select").length;jQuery(this).find("input:not([type=button]), textarea, select").each(function(e,t){s+='"'+t.id.replace(/-\d+/g,"")+'":',"checkbox"==t.type?s+=t.checked+",":s+='"'+t.value+'",',e==o-1&&(s=s.slice(0,-1))}),s+="},",e==i-1&&(s=s.slice(0,-1))}),s+="]}",jQuery.ajax({context:this,url:pbInfo.ajax_url,method:"post",data:{action:"save_section",section:s},success:function(e){"err"==e?(jQuery("#save-name").css("border-color","#f66"),jQuery("#save-warning").show()):jQuery(this).parents(".lightbox").remove()}})})}),jQuery("#load-section").on("click",function(e){e.preventDefault(),jQuery.ajax({context:this,url:pbInfo.ajax_url,method:"get",data:{action:"get_sections"},success:function(e){jQuery(this).after('<div id="section-load" class="lightbox"><div class="postbox"><div class="lightbox-header"><h2 class="lightbox-title">Saved Sections</h2><button class="lightbox-cancel"><span class="dashicons dashicons-no-alt"></span></button></div><div class="inside">'+e+"</div></div></div>")}})}),jQuery(document).on("click",".saved-sections li button",function(e){e.preventDefault(),jQuery.ajax({context:this,url:pbInfo.ajax_url,method:"get",data:{action:"load_section",section:jQuery(this).parent().attr("index")},success:function(e){jQuery("#sections").append(e),updateOrder(),jQuery(this).parents(".lightbox").remove()}})}),jQuery(document).on("click",".saved-sections li a",function(e){e.preventDefault(),jQuery.ajax({context:this,url:pbInfo.ajax_url,method:"post",data:{action:"delete_section",section:jQuery(this).parent().attr("index")},success:function(e){jQuery(this).parent().remove()}})}),jQuery(document).on("click",".section-delete",function(e){e.preventDefault(),jQuery(this).after('<div id="section-save" class="lightbox"><div class="postbox"><div class="lightbox-header"><h2 class="lightbox-title">Delete Section?</h2><button class="lightbox-cancel"><span class="dashicons dashicons-no-alt"></span></button></div><div class="inside"><div class="choices"><button class="button lightbox-cancel">Cancel</button><button class="button section-delete-confirm">Delete</button></div></div></div></div>'),jQuery(document).on("click",".section-delete-confirm",function(){var e=jQuery(this).parents(".section");e.find(".text-editor").each(function(){wp.editor.remove(this.id)}),e.remove(),updateOrder()})}),jQuery(document).on("click",".section-collapse",function(e){e.preventDefault(),jQuery(this).children().toggleClass("flip"),jQuery(this).parents(".section-header").siblings(".section-inside").slideToggle()}),jQuery(document).on("click",".section-settings",function(e){e.preventDefault(),jQuery(this).parents(".section-header").next().slideToggle()}),jQuery("#sections").sortable({axis:"y",handle:".section-handle",cursor:"ns-resize",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(e,t){updateOrder()}}),jQuery("#sections").on("change",".section-options select",function(){"one"==jQuery(this).val()?jQuery(this).parents(".section").find(".section-inside .modules").html('<li class="module-slot col-xs-12"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li>'):"halves"==jQuery(this).val()?jQuery(this).parents(".section").find(".section-inside .modules").html('<li class="module-slot col-xs-6"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li><li class="module-slot col-xs-6"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li>'):"one-third"==jQuery(this).val()?jQuery(this).parents(".section").find(".section-inside .modules").html('<li class="module-slot col-xs-4"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li><li class="module-slot col-xs-8"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li>'):"two-thirds"==jQuery(this).val()?jQuery(this).parents(".section").find(".section-inside .modules").html('<li class="module-slot col-xs-8"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li><li class="module-slot col-xs-4"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li>'):jQuery(this).parents(".section").find(".section-inside .modules").html('<li class="module-slot col-xs-4"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li><li class="module-slot col-xs-4"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li><li class="module-slot col-xs-4"><div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div></li>')}),jQuery(document).on("click",".add-module",function(e){e.preventDefault();var t=jQuery(this).parents(".module-slot");jQuery("#module-choices").show(0,function(){jQuery(".module-choice").bind("click",function(e){e.preventDefault(),jQuery.ajax({context:this,url:pbInfo.ajax_url,method:"get",data:{action:"empty_module",module:jQuery(this).attr("module")},success:function(e){jQuery(t).html(e),jQuery("#module-choices").hide(),jQuery(".modules").sortable({axis:"x",handle:".module-handle",cursor:"ew-resize",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(e,t){updateOrder()}}),jQuery(".module-choice").unbind(),updateOrder()}})})})}),jQuery(document).on("click",".module-save",function(e){e.preventDefault();prompt("What would you like to save this module as?")}),jQuery(document).on("click",".module-delete",function(e){e.preventDefault(),jQuery(this).after('<div id="module-delete" class="lightbox"><div class="postbox"><div class="lightbox-header"><h2 class="lightbox-title">Delete Module?</h2><button class="lightbox-cancel"><span class="dashicons dashicons-no-alt"></span></button></div><div class="inside"><div class="choices"><button class="button lightbox-cancel">Cancel</button><button class="button module-delete-confirm">Delete</button></div></div></div></div>'),jQuery(document).on("click",".module-delete-confirm",function(){var e=jQuery(this).parents(".module-slot");e.find(".text-editor").each(function(){wp.editor.remove(this.id)}),e.html('<div class="add-module"><span class="dashicons dashicons-plus-alt"></span><span class="add-module-text">Add Module</span></div>'),updateOrder()})}),jQuery(document).on("click",".module-tab",function(e){var t=jQuery(this).attr("sel");jQuery(this).siblings().removeClass("current"),jQuery(this).addClass("current"),jQuery(this).parent().parent().next().children().hide(),jQuery(this).parent().parent().next().children("."+t).show()}),jQuery(document).on("change",".video-type-sel",function(){var e="."+jQuery(this).val();jQuery(this).parents("ul").find(".video-type").hide(),jQuery(this).parents("ul").find(e).show()}),jQuery(".video-type-sel").each(function(){var e="."+jQuery(this).val();jQuery(this).parents("ul").find(".video-type").hide(),jQuery(this).parents("ul").find(e).show()});
//# sourceMappingURL=pagebuilder.min.js.map
