{"version":3,"sources":["admin/options.js"],"names":["initMap","document","getElementById","map","google","maps","Map","center","lat","lng","scrollwheel","zoom","input","locId","autocomplete","places","Autocomplete","bindTo","infowindow","InfoWindow","marker","Marker","anchorPoint","Point","service","PlacesService","changePlace","changeLoc","place","geometry","event","preventDefault","window","alert","name","viewport","fitBounds","setCenter","location","setZoom","setIcon","url","icon","size","Size","origin","anchor","scaledSize","setPosition","setVisible","address","address_components","number","street","room","city","state","zip","country","i","length","addressType","types","short_name","long_name","setContent","open","value","place_id","close","getPlace","getDetails","placeId","place2","status","addListener","addListenerOnce","jQuery","on","hoursCheck","prop","show","hide","e","this","addClass","ajax","context","locals","ajax_url","method","data","action","success","res","val","click"],"mappings":"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","file":"options.min.js","sourcesContent":["// Hours check\njQuery('.site-options #site_hours').on('change', function() {\n  hoursCheck();\n});\nvar hoursCheck = (function hoursCheck() {\n  if (jQuery('.site-options #site_hours').prop('checked')) {\n    jQuery('.site-options .hours').show();\n  } else {\n    jQuery('.site-options .hours').hide();\n  }\n  return hoursCheck;\n}());\n\n// Site generation\njQuery('.sitemap-options .inline-option .button').on('click', function(e) {\n  e.preventDefault();\n  jQuery(this).addClass('disabled');\n  jQuery.ajax({\n    context: this,\n    url: locals.ajax_url,\n    method: 'post',\n    data: {\n      action: '_ws_generate_sitemap'\n    },\n    success: function(res) {\n      if (res.success) {\n        jQuery('.sitemap-options #last_mod').val(res.data);\n        jQuery('.sitemap-options #submit').click();\n      }\n    }\n  });\n});\n\nfunction initMap() {\n  if (!document.getElementById('site_map')) {\n    return;\n  }\n  var map = new google.maps.Map(document.getElementById('site_map'), {\n    center: {lat: 37.09, lng: -95.71},\n    scrollwheel: false,\n    zoom: 4\n  });\n  var input = document.getElementById('site_location');\n  var locId = document.getElementById('site_location_id');\n  var autocomplete = new google.maps.places.Autocomplete(input);\n  autocomplete.bindTo('bounds', map);\n  var infowindow = new google.maps.InfoWindow();\n  var marker = new google.maps.Marker({\n    map: map,\n    anchorPoint: new google.maps.Point(0, -29)\n  });\n  var service = new google.maps.places.PlacesService(map);\n\n  var changePlace = function() {\n    infowindow.close();\n    marker.setVisible(false);\n    var place = autocomplete.getPlace();\n    if (!place && locId.value) {\n      service.getDetails({placeId: locId.value}, function(place2, status) {\n        place = place2;\n        changeLoc();\n      });\n    } else if (place) {\n      changeLoc();\n    }\n\n    function changeLoc() {\n      if (!place.geometry) {\n        event.preventDefault();\n        window.alert(\"No details available for input: '\" + place.name + \"'\");\n        return;\n      }\n      if (place.geometry.viewport) {\n        map.fitBounds(place.geometry.viewport);\n      } else {\n        map.setCenter(place.geometry.location);\n        map.setZoom(15);\n      }\n      marker.setIcon(/** @type {google.maps.Icon} */({\n        url: place.icon,\n        size: new google.maps.Size(71, 71),\n        origin: new google.maps.Point(0, 0),\n        anchor: new google.maps.Point(17, 34),\n        scaledSize: new google.maps.Size(35, 35)\n      }));\n      marker.setPosition(place.geometry.location);\n      marker.setVisible(true);\n      var address = '';\n      if (place.address_components) {\n        var number = '', street = '', room = '', city = '', state = '', zip = '', country = '';\n        for (var i = 0; i < place.address_components.length; i++) {\n          var addressType = place.address_components[i].types[0];\n          if (addressType == 'street_number') {\n            number = place.address_components[i].short_name;\n          } else if (addressType == 'route') {\n            street = place.address_components[i].short_name;\n          } else if (addressType == 'subpremise') {\n            room = '#' + place.address_components[i].long_name;\n          } else if (addressType == 'locality') {\n            city = place.address_components[i].long_name;\n          } else if (addressType == 'administrative_area_level_1') {\n            state = place.address_components[i].short_name;\n          } else if (addressType == 'postal_code') {\n            zip = place.address_components[i].short_name;\n          } else if (addressType == 'country') {\n            country = place.address_components[i].short_name;\n          }\n        }\n        address = number + ' ' + street + ' ' + room + '<br>' + city + ', ' + state + ' ' + zip;\n      }\n      infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);\n      infowindow.open(map, marker);\n      document.getElementById('site_location_id').value = place.place_id;\n      // document.getElementById('theme_location_name').value = place.name;\n      document.getElementById('site_location_street').value = number + ' ' + street + ' ' + room;\n      document.getElementById('site_location_city').value = city;\n      document.getElementById('site_location_state').value = state;\n      document.getElementById('site_location_zip').value = zip;\n      document.getElementById('site_location_country').value = country;\n      // document.getElementById('theme_location_readable').value = address;\n    }\n  };\n  autocomplete.addListener('place_changed', changePlace);\n  // Show place when page loads\n  google.maps.event.addListenerOnce(map, 'idle', changePlace);\n}\n"]}